# FinSense

**FinSense** — гибридная AI-система для классификации банковских транзакций и генерации персональных финансовых рекомендаций.

Проект демонстрирует событийно-ориентированную архитектуру, объединяющую классическое машинное обучение (ML) и LLM-агентов для достижения баланса между точностью, стоимостью и масштабируемостью.

---

## О проекте

Современные банковские приложения сталкиваются с рядом проблем:

- Неточная категоризация транзакций (правила, простые ML-модели)
- Высокая стоимость и задержка при использовании LLM для всех операций
- Шаблонные рекомендации без глубокого анализа поведения пользователя

**FinSense** решает эти задачи с помощью гибридного подхода:

- ML-классификатор обрабатывает большинство транзакций быстро и дешево  
-  LLM-агенты подключаются для сложных случаев и генерации рекомендаций  
-  Apache Kafka обеспечивает асинхронную событийную обработку  
-  PostgreSQL хранит структурированные финансовые данные  
-  Сквозная трассировка (correlation-id) обеспечивает наблюдаемость  

---

## Архитектура

Система построена на принципах Event-Driven Architecture с чётким разделением ответственности.

### Основные компоненты:

- **Transaction Service** — управление жизненным циклом транзакций  
- **Classifier Service (ML)** — быстрая классификация с оценкой уверенности  
- **Transaction Classifier Agent (LLM)** — обработка низкоуверенных случаев  
- **Financial Coach Agent (LLM + tools)** — анализ истории расходов и генерация советов  
- **Notify Service** — отправка рекомендаций (например, в Telegram)  
- **Kafka** — центральная шина событий  
- **Postgres** — хранилище данных  

### Поток обработки:

1. Транзакция публикуется в `raw-transactions`
2. ML-классификатор обрабатывает транзакцию
3. При низкой уверенности — подключается LLM-агент
4. Результат сохраняется в БД
5. Financial Coach анализирует историю и формирует рекомендации
6. Уведомление отправляется пользователю асинхронно

---

## Цели проекта

- Точность категоризации ≥95% (гибрид ML + LLM)
- p95 времени обработки <2 секунд
- ≤10% транзакций обрабатываются LLM
- Масштабируемость ≥1000 RPS
- Демонстрация гибридной AI-архитектуры в рамках магистерской диссертации

---

## Технологический стек

- Kotlin / Java
- Spring Boot
- Apache Kafka
- PostgreSQL
- Smile (ML-библиотека)
- Внешние LLM API
- Docker

---

## Архитектурные принципы

- Event-Driven Design  
- Гибридный интеллект (ML + LLM)  
- Асинхронная обработка  
- Микросервисы
- Заменяемость AI-модулей  
- Наблюдаемость через correlation-id  

---

## Контекст разработки

Проект разрабатывается как магистерская диссертация и фокусируется на:

- Гибридных AI-архитектурах  
- Интеграции ML и LLM  
- Проектировании распределённых систем  
- Практической реализации событийно-ориентированной архитектуры  

---

## Статус

MVP в разработке.  
Текущий фокус — реализация гибридного пайплайна классификации и AI-агентов.

---

## Документация

- Architecture Drivers  
- Business Case  
- Architecture Diagrams (System Context, Logical, DB Schema)  

Документация размещена в каталоге `/docs`.

---
