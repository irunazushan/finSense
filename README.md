# FinSense

<p align="center">
  <b>–ì–∏–±—Ä–∏–¥–Ω–∞—è AI-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</b>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Java-17-blue" />
  <img src="https://img.shields.io/badge/Kotlin-2.1-purple" />
  <img src="https://img.shields.io/badge/Spring_Boot-3.5-brightgreen" />
  <img src="https://img.shields.io/badge/Kafka-Event--Driven-blue" />
  <img src="https://img.shields.io/badge/PostgreSQL-18-blue" />
  <img src="https://img.shields.io/badge/Docker-ready-blue" />
  <img src="https://img.shields.io/badge/Architecture-Event--Driven-orange" />
</p>

---

## üìå –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**FinSense** ‚Äî —ç—Ç–æ –≥–∏–±—Ä–∏–¥–Ω–∞—è AI-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è:

* –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (ML + LLM fallback)
* –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

* –ì–∏–±—Ä–∏–¥–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç (ML + LLM)
* Event-Driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –Ω–∞ –±–∞–∑–µ Kafka
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
* ReAct-–ø–æ–¥—Ö–æ–¥ (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å AI-–∞–≥–µ–Ω—Ç–æ–≤)
* –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ bounded contexts

–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –º–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–æ–π –¥–∏—Å—Å–µ—Ä—Ç–∞—Ü–∏–∏ –ø–æ –≥–∏–±—Ä–∏–¥–Ω—ã–º AI-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–º.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

FinSense –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **Event-Driven Microservices Architecture**.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å                                  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                                |
| --------------------------------------- | ------------------------------------------------------------------------- |
| **Core Service**                        | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, –≤–ª–∞–¥–µ–ª–µ—Ü –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ (User, Transaction, Recommendation) |
| **Classifier Service (ML)**             | –ë—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è                                       |
| **Transaction Classifier Agent (LLM)**  | Fallback-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –Ω–∏–∑–∫–æ–º confidence                              |
| **Financial Coach Agent (LLM + tools)** | –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π                                  |
| **Notify Service**                      | –î–æ—Å—Ç–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Telegram)                                           |
| **Kafka**                               | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π                                                  |
| **PostgreSQL**                          | –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–æ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö                                                 |

---

## üîÑ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 1Ô∏è‚É£ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

1. Generator –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ `raw-transactions`
2. Core —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∏ –≤—ã–∑—ã–≤–∞–µ—Ç ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä
3. –ï—Å–ª–∏ `confidence ‚â• threshold` ‚Üí —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞
4. –ï—Å–ª–∏ `confidence < threshold` ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è `llm-classifier-requests`
5. LLM-–∞–≥–µ–Ω—Ç –ø—É–±–ª–∏–∫—É–µ—Ç `llm-classifier-responses`
6. Core –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

### 2Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç
   `POST /api/v1/users/{userId}/recommendations`
2. Core:

   * –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `requestId`
   * —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PENDING`
   * –ø—É–±–ª–∏–∫—É–µ—Ç `coach-requests`
3. Financial Coach Agent:

   * —á–∏—Ç–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (read-only)
   * –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
   * –≤—ã–∑—ã–≤–∞–µ—Ç LLM
   * –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å (`COMPLETED` / `FAILED`)
   * –ø—É–±–ª–∏–∫—É–µ—Ç `coach-responses`
4. Notify Service:

   * —á–∏—Ç–∞–µ—Ç `coach-responses`
   * –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

   * —á–µ—Ä–µ–∑ Telegram
   * —á–µ—Ä–µ–∑ `GET /api/v1/recommendations/{requestId}`

---

## üì° Kafka Topics

| Topic                      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                      |
| -------------------------- | ------------------------------- |
| `raw-transactions`         | –ü–æ—Ç–æ–∫ —Å—ã—Ä—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π          |
| `llm-classifier-requests`  | –ó–∞–ø—Ä–æ—Å—ã fallback-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏  |
| `llm-classifier-responses` | –û—Ç–≤–µ—Ç—ã LLM-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏        |
| `coach-requests`           | –ó–∞–ø—Ä–æ—Å—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π  |
| `coach-responses`          | –°–æ–±—ã—Ç–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

* Event-Driven Architecture
* –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ML + LLM
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—è–∂—ë–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
* Stateless –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
* –Ø–≤–Ω–∞—è state machine —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
* Correlation ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
* ReAct-–ø–æ–¥—Ö–æ–¥ (Reason + Act —á–µ—Ä–µ–∑ tools)
* –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ bounded contexts

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* Kotlin / Java 17
* Spring Boot 3.5
* Spring Kafka
* PostgreSQL
* Liquibase
* –í–Ω–µ—à–Ω–∏–µ LLM API (DeepSeek / OpenAI)
* Docker & Docker Compose

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
docker-compose -f docker-compose.infrastructure.yml up -d
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker-compose -f docker-compose.services.yml up -d
```

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

Core Service:

```
http://localhost:8080/actuator/health
```

---

## üîå REST API (Core Service)

| –ú–µ—Ç–æ–¥ | Endpoint                                 |
| ----- | ---------------------------------------- |
| GET   | `/api/v1/users/{userId}/transactions`    |
| GET   | `/api/v1/users/{userId}/recommendations` |
| POST  | `/api/v1/users/{userId}/recommendations` |
| GET   | `/api/v1/recommendations/{requestId}`    |
| GET   | `/actuator/health`                       |

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
/core-service
/classifier-service
/transaction-classifier-agent
/financial-coach-agent
/notify-service
/docs
/docker-compose.infrastructure.yml
/docker-compose.services.yml
```

---

## üéØ –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

* –¢–æ—á–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚â• 95%
* p95 –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ < 2 —Å–µ–∫—É–Ω–¥
* ‚â§ 10% —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç—Ä–µ–±—É—é—Ç LLM
* –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≥–∏–±—Ä–∏–¥–Ω–æ–π AI-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤ —Ä–∞–º–∫–∞—Ö –º–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–æ–π –¥–∏—Å—Å–µ—Ä—Ç–∞—Ü–∏–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `/docs`:

* Business Case
* Architecture Drivers
* Service-level documentation
* Sequence Diagrams
* Deployment Diagram

---

## üìå –°—Ç–∞—Ç—É—Å

üöß MVP –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
–¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

---
